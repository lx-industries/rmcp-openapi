# Shared CI templates for rmcp-openapi

# sccache configuration for build caching
.sccache-rust:
  variables:
    RUSTC_WRAPPER: "sccache"
    SCCACHE_LOG: "warn"
  before_script:
    - sccache --version || true

# Docker-in-Docker variables (reusable anchor)
.docker-in-docker-variables: &docker-in-docker-variables
  DOCKER_TLS_CERTDIR: "/certs"

# Docker-in-Docker template
.docker-in-docker:
  image: docker:29.2.1-dind@sha256:68f6d9ab84623d1116c5432a3b924a07ee09960e6129ca1cb03ef14010588cb4
  tags:
    - docker-in-docker
  services:
    - docker:29.2.1-dind@sha256:68f6d9ab84623d1116c5432a3b924a07ee09960e6129ca1cb03ef14010588cb4
  variables:
    <<: *docker-in-docker-variables
  before_script:
    - docker info
